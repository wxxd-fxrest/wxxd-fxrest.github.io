---
title: CPU 스케줄링에 대한 이해
date: 2024-10-01 21:10:00 +09:00
categories: [ComputerScience, OperatingSystems]
tags:
  [
    ComputerScience,
    OperatingSystems,
    Process,
    Thread,
  ]
---

<br/>
<br/>

# CPU 스케줄링에 대한 이해
## CPU 스케줄링이란?
CPU 스케줄링은 운영체제의 CPU 스케줄러가 `READY` 상태의 프로세스 중 어떤 프로세스에 CPU를 할당할지를 결정하는 과정이다. 이 과정은 모든 프로세스가 공평하게 CPU 자원을 할당받도록 하여 시스템의 효율성을 극대화하고, 사용자 요구에 신속하게 반응하는 것을 목표로 한다.  

<br/>

### CPU 스케줄링의 주요 요소
- **스케줄링 알고리즘**: 다양한 알고리즘(예: FCFS, SJF, Round Robin 등)을 통해 프로세스를 선택한다.
- **우선순위**: 프로세스 간 우선순위를 고려하여 자원을 배분한다.
- **응답 시간**: 사용자 상호작용에 대한 반응 시간을 최소화한다.  

<br/>

### Context Switch와의 연관성
Context Switch는 현재 실행 중인 프로세스의 상태를 저장하고, 다음에 실행할 프로세스의 상태를 복원하는 과정이다. CPU 스케줄링의 결과로 프로세스가 전환될 때 Context Switch가 발생한다. 즉, 스케줄러가 선택한 프로세스가 CPU를 할당받을 때마다 Context Switch가 필요하다.   

Context Switch는 CPU의 자원을 소모하므로, 빈번한 Context Switch는 시스템 효율성을 저하시킬 수 있다. CPU 스케줄링에서 선택된 프로세스가 자주 바뀌면, Context Switch가 잦아져 오버헤드가 증가한다. 또한, Context Switch는 멀티태스킹을 가능하게 하여 여러 프로세스가 동시에 실행되는 것처럼 보이게 한다.  

<br/>

### CPU 스케줄링의 구분
1. **장기 스케줄링 (Long-term Scheduler)**:
   - 고수준 스케줄링 또는 작업 스케줄링이라고도 한다.
   - 프로세스에 메모리 및 자원을 할당하는 문제를 다룬다.
   - 전체 시스템의 부하를 고려하여 작업 요청을 수용할지 거부할지 결정한다.
   - `NEW` 상태의 프로세스를 승인(admit)하는 역할을 한다.
   - 최근 운영체제에서는 장기 스케줄러가 없는 경우가 많아, 프로그램 실행 시 바로 `READY` 상태로 전환된다.  

2. **중기 스케줄링 (Medium-term Scheduler, Swapper)**:
   - 이미 활성화된 프로세스 관리를 담당한다.
   - 시스템 과부하를 방지하기 위해 활성화된 프로세스의 중지 여부를 결정한다.
   - 여유 공간 확보를 위해 프로세스를 메모리에서 디스크로 이동시키는 작업(Swap out)을 수행한다.
   - degree of multiprogramming을 제어한다.
   - 중지된 프로세스는 보류 상태(Suspended, stopped)가 된다.  

3. **단기 스케줄링 (Short-term Scheduler, CPU Scheduler)**:
   - 가장 작은 단위의 스케줄링을 담당한다.
   - 어떤 프로세스에 CPU를 할당할지, 어떤 프로세스를 대기 상태로 보낼지 결정한다.
   - 스케줄링 알고리즘에 따라 프로세스를 선택하고 자원을 배분하는 방식이 시스템에 큰 영향을 미친다.  

<br/>

### CPU 스케줄링의 주요 목적
CPU 스케줄링의 주요 목적은 모든 프로세스가 공평하고 효율적으로 자원을 할당받는 것이다. 이를 위해 여러 알고리즘이 설계되었다.  
- **공평성**: 프로세스에게 자원을 공평하게 배분해야 한다.
- **효율성**: 시스템 자원이 쉬는 시간이 없어야 하며, CPU가 유휴 상태로 남지 않도록 해야 한다.
- **안정성**: 중요 프로세스에 우선권을 부여하고, 프로세스 수가 증가해도 시스템이 안정적으로 운영되어야 한다.
- **확장성**: 시스템 자원이 늘어날 경우, 이 혜택이 시스템에 잘 반영되어야 한다.
- **반응 시간 보장**: 프로세스의 요구에 적절한 시간 안에 반응해야 한다.
- **무한 연기 방지**: 특정 프로세스의 작업이 무한정 연기되어서는 안 된다.  

<br/>
* * *
<br/>

## 스케줄링 시 고려사항
### 01. 선점형 스케줄링과 비선점형 스케줄링
- **선점형 스케줄링 (Preemptive Scheduling)**:
  - 정의: 운영체제가 실행 중인 프로세스의 CPU를 강제로 회수할 수 있는 방식이다.
  - 상황: Timeout, I/O Interrupt, System call 등으로 프로세스의 작업을 중단하고 새로운 프로세스를 시작할 수 있다.
  - 특징: Context switch로 인한 오버헤드가 발생하며, 여러 작업을 동시에 수행할 수 있어 저수준 스케줄러에서 주로 사용된다.  
- **비선점형 스케줄링 (Non-Preemptive Scheduling)**:
  - 정의: 프로세스가 실행 상태에 들어가면 그 프로세스가 끝나거나 자진하여 CPU를 반납할 때까지 계속 실행된다.
  - 특징: Context switch 오버헤드가 없으며, 스케줄러의 작업이 줄어들어 효율적일 수 있으나 전체 시스템의 처리율이 떨어질 수 있다.  

<br/>

### 02. 프로세스 우선순위
- **프로세스 우선순위**: 프로세스 간에 우선순위가 존재하며, 이는 프로세스의 실행 빈도 및 자원 할당에 영향을 미친다.
- **커널 프로세스**: 커널 프로세스는 일반 프로세스보다 높은 우선순위를 가진다. 커널과 관련된 작업은 일반적으로 더 중요하므로 CPU 스케줄러가 이를 우선적으로 처리한다.
- **일반 프로세스**: 일반 프로세스 간에도 우선순위가 설정되어야 한다. 예를 들어, 비디오 플레이어와 워드 프로세서가 동일한 우선순위를 가질 경우, 비디오 플레이어가 끊길 수 있다. 이를 해결하기 위해 일반 프로세스 간에도 우선순위를 매기는 것이 필요하다.  

<br/>

### 03. CPU Bound Process와 I/O Bound Process
- **프로세스 상태**: 프로세스는 실행 상태와 대기 상태에서 작업이 이루어진다. 실행 상태는 CPU를 사용하는 상태이며, 대기 상태는 I/O 요청 후 완료를 기다리는 상태이다.
- **버스트 유형**: CPU 버스트는 CPU를 사용하는 작업이고, I/O 버스트는 입출력 작업을 의미한다.
- **프로세스 유형**:
  - **CPU Bound Process**: CPU 버스트가 많은 프로세스로, CPU를 할당받으면 대부분의 시간을 CPU에서 작업한다.
  - **I/O Bound Process**: I/O 버스트가 많은 프로세스로, CPU를 할당받아도 금방 대기 상태로 전환된다.
- **스케줄링 효율성**: I/O Bound Process를 우선 실행 상태로 옮기는 것이 효율적이다. I/O Bound Process는 CPU를 빨리 반환하므로 시스템의 전체 처리량 향상에 기여한다. 따라서 스케줄링 시 I/O Bound Process의 우선순위를 CPU Bound Process보다 높이는 것이 바람직하다.  

<br/>

### 04. 전면 프로세스와 후면 프로세스
- **전면 프로세스 (Foreground Process)**: GUI를 사용하는 OS에서 화면의 맨 앞에 위치한 프로세스이다. 사용자와 상호작용이 가능하며, 현재 입출력을 사용하는 프로세스이다. 예를 들어, 웹 브라우저나 텍스트 편집기가 이에 해당한다.  
- **후면 프로세스 (Background Process)**: 사용자와 상호작용이 없는 프로세스이다. 시스템 작업이나 백그라운드에서 수행되는 작업을 처리하며, 압축 프로그램이나 데이터 백업 등이 이에 해당한다.  
- **우선순위**: 전면 프로세스는 사용자의 요구에 즉각 반응해야 하므로 우선순위가 높다. 후면 프로세스는 상대적으로 낮은 우선순위를 가진다. 따라서 전면 프로세스가 후면 프로세스보다 CPU를 할당받을 확률이 높다.  

<br/>
<br/>
<br/>
* * *
<br/>
<br/>
<br/>

> **Reference**  
<a href="https://kjhoon0330.tistory.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9COS-CPU-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%A7%81" style="text-decoration: none; color: #757575;">[운영체제(OS)] CPU 스케줄링 - (1) CPU 스케줄링의 개념</a>