---
title: Process와 Thread에 대해
date: 2024-09-29 21:10:00 +09:00
categories: [ComputerScience, OperatingSystems]
tags:
  [
    ComputerScience,
    OperatingSystems,
    Process,
    Thread,
  ]
---

<br/>
<br/>

# Process
`Process`는 운영체제로부터 자원을 할당받은 자원 단위이다. 이 단위는 실행 중인 프로그램을 나타내며, 실행에 필요한 모든 정보를 포함하고 있다.

## Program과 Process
정적 프로그램(static program)은 윈도우의 `*.exe`, Mac의 `*.dmg` 파일과 같은 컴퓨터에서 실행 가능한 파일을 통칭한다. 프로그램을 실행하기 전 상태를 정적 `프로그램`이라 부르며, 이 상태는 코드 덩어리로 존재한다. 

이렇게 실행 전 프로그램이 코드 덩어리라면, 이를 실행하여 정적인 상태를 동적으로 변환한 것이 프로세스이다. 즉, 코드 덩어리를 `Program`, 그 덩어리를 실행한 것을 `Process`라 하는 것이다.  

## Process의 상태
프로세스는 여러 상태를 가질 수 있다. 일반적으로 다음과 같은 상태가 존재한다:
- **새로 생성됨**(New): 프로세스가 생성된 상태.
- **실행 중**(Running): CPU에서 작업을 수행 중인 상태.
- **대기 중**(Waiting): I/O 작업 등으로 인해 대기하는 상태.
- **종료됨**(Terminated): 작업이 완료되어 종료된 상태.  
프로세스가 실행되면 CPU에서 작업을 수행하게 되며, 필요 시 I/O 작업으로 인해 대기 상태에 들어갈 수 있다. 이러한 상태 전환은 운영체제의 스케줄러에 의해 관리된다.

### 프로세스의 메모리
프로세스는 메모리에서 다음과 같은 영역을 사용한다:
1. **코드 영역**: 실행할 코드가 저장되는 영역.
2. **데이터 영역**: 전역 변수와 정적 변수가 저장되는 영역.
3. **스택 영역**: 함수 호출 시 사용하는 지역 변수와 매개변수가 저장되는 영역.
4. **힙 영역**: 동적 메모리 할당에 사용되는 영역.

각 프로세스는 독립된 메모리 공간을 가지므로, 다른 프로세스와 메모리를 공유하지 않는다. 이로 인해 안정성이 높지만, 자원 소모가 커질 수 있다.

<br/>
* * *
<br/>

# Thread
스레드(thread)를 이해하기 위해서는 프로세스의 한계를 먼저 알아야 한다. 현재는 여러 프로그램을 동시에 실행하거나 여러 작업을 동시에 처리할 수 있지만, 과거에는 게임 하나를 다운로드하기 위해 다운로드를 누른 순간부터 그 작업이 완료될 때까지 아무것도 하지 못하고 기다려야 했다.   
동일한 프로그램을 여러 개의 프로세스로 만들게 되면 그만큼의 메모리를 차지하고, CPU에서 할당받는 자원이 중복될 것이다. 이러한 한계를 극복하기 위해 만들어진 것이 바로 `Thread`이다.  

## Thread의 개념
스레드는 하나의 프로세스 내에서 동시에 진행되는 작업의 갈래, 또는 흐름의 단위를 말한다. 하나의 프로세스 안에서 여러 가지 작업의 흐름이 동시에 진행되기 때문에 가능하다. 이러한 작업 흐름을 스레드라고 하며, 여러 개가 있다면 `Multi-threaded`라고 부른다.  

### 스레드와 자원 공유
스레드는 같은 프로세스 내에서 실행되므로, 메모리와 자원을 공유한다. 이는 다음과 같은 장점을 제공한다:
1. **자원 접근**: 스레드는 같은 데이터 영역을 공유하므로, 데이터를 쉽게 접근하고 수정할 수 있다.
2. **상태 공유**: 여러 스레드가 같은 프로세스 내에서 실행되기 때문에, 상태 정보를 공유할 수 있다.  
하지만 이러한 공유는 데이터 경합(data race) 문제를 초래할 수 있다. 따라서 동기화(`synchronization`) 기법이 필요하다.

<br/>
* * *
<br/>

## Process의 자원 공유
프로세스는 기본적으로 서로 독립적이지만, 특정한 경우에 한정하여 자원을 공유할 수 있다. 예를 들어, 프로세스 간에 IPC(`Inter-Process Communication`) 메커니즘을 사용하여 데이터를 교환할 수 있다. 이는 파이프, 메시지 큐, 공유 메모리 등을 통해 이루어진다.  

### 프로세스의 자원 공유 방식
- **공유 메모리**: 여러 프로세스가 동일한 메모리 공간을 공유하여 데이터를 교환하는 방식. 이 방식은 빠르지만, 동기화 문제가 발생할 수 있다.
- **메시지 전달**: 프로세스 간에 메시지를 보내고 받는 방식으로, 안전하게 데이터를 전달할 수 있으나 상대적으로 느릴 수 있다.  

<br/>
* * *
<br/>

## 프로세스 & 스레드의 동시 실행 원리
프로세스와 스레드는 모두 CPU 자원을 할당받아 실행된다. 운영체제는 스케줄러를 통해 어떤 프로세스나 스레드가 CPU 자원을 사용할지를 결정한다.
1. **시간 분할(Time-sharing)**: CPU는 여러 프로세스나 스레드 간에 빠르게 전환하면서 동시에 실행되는 것처럼 보이게 한다. 이를 통해 사용자는 여러 작업을 동시에 수행하는 것처럼 느낀다.
2. **우선 순위**: 운영체제는 각 프로세스나 스레드에 우선 순위를 부여하여 자원 할당의 효율성을 높인다. 우선 순위가 높은 프로세스나 스레드가 CPU를 먼저 할당받는다.  

<br/>
* * *
<br/>

## CPU 작업 처리 방식
CPU는 스레드와 프로세스를 처리하는 방식이 다르다. 일반적으로 스레드는 프로세스보다 경량화되어 있어, 스케줄링 및 컨텍스트 스위칭(`context switching`) 비용이 적다.
1. **프로세스**: 새로운 프로세스를 생성할 때는 메모리 할당, 페이지 테이블 설정 등 여러 복잡한 작업이 필요하다. 이로 인해 전환이 느리다.
2. **스레드**: 스레드는 같은 프로세스 내에서 생성되므로, 메모리 할당이 간단하고 빠르다. 따라서 스레드 간 전환이 더 효율적이다.  

<br/>
* * *
<br/>

## 프로세스 & 스레드의 생명주기
프로세스와 스레드는 각각 고유한 생명주기를 가진다.  

### 프로세스의 생명주기
1. **생성**: 새로운 프로세스가 생성된다.
2. **준비 상태**: CPU 자원을 기다리는 상태.
3. **실행 상태**: CPU에서 실행되는 상태.
4. **대기 상태**: I/O 작업 등으로 인해 대기하는 상태.
5. **종료 상태**: 작업이 완료되어 종료되는 상태.  

### 스레드의 생명주기
1. **생성**: 새로운 스레드가 생성된다.
2. **준비 상태**: 실행을 기다리는 상태.
3. **실행 상태**: CPU에서 실행되는 상태.
4. **종료 상태**: 작업이 완료되어 종료되는 상태.
스레드는 프로세스의 생명주기와 유사하지만, 각 스레드는 독립적으로 실행되므로 종료 시 다른 스레드에 영향을 주지 않는다.

<br/>
* * *
<br/>

## 결론
프로세스와 스레드는 운영체제에서 중요한 역할을 담당하며, 각각의 특성과 동작 원리를 이해하는 것은 소프트웨어 개발 및 시스템 설계에 있어 필수적이다. 프로세스는 자원을 독립적으로 관리하는 반면, 스레드는 자원을 공유하여 효율적인 작업 처리가 가능하다. 이러한 이해는 개발자가 더 나은 프로그램을 설계하는 데 큰 도움이 된다.

<br/>
<br/>
<br/>
* * *
<br/>
<br/>
<br/>

> **Reference**  
<a href="https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4" style="text-decoration: none; color: #757575;">완전히 정복하는 프로세스 vs 스레드 개념</a>